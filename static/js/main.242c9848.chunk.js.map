{"version":3,"sources":["Search.js","List.js","App.js","index.js"],"names":["Search","props","className","id","placeholder","onChange","handleInputChange","type","value","onClick","onClickSearch","List","useState","hits","setHITS","total","setTotal","ready","setReady","query","setQuery","currentPage","setCurrentPage","useEffect","handleSearchWithPage","console","log","n","body","axios","post","then","response","data","src","data-retina","alt","width","height","onClickBack","e","target","map","p","_source","url","href","title","sentence","result","resultArray","split","length","slice","join","trimByWord","content","aria-label","number","round","Math","ceil","i","push","numberList","floor","data-loader","App","changeToList","state","setState","changeToSearch","sendInputToParent","alert","this","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.242c9848.chunk.js","sourcesContent":["import React from 'react';\n\nconst Search = props => {\n    return (\n        <div className=\"hero_home version_1\">\n            <div className=\"content\">\n                <h3>Travela!</h3>\n                <p>The world is yours.</p>\n                <form>\n                    <div id=\"custom-search-input\">\n                        <div className=\"input-group\">\n                            <input className=\" search-query\" placeholder=\"Ex. City, Location ....\" onChange={props.handleInputChange}></input>\n                            <input type=\"submit\" className=\"btn_search\" value=\"Search\" onClick={props.onClickSearch} />\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n\nexport default Search;\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst List = props => {\n  const [hits, setHITS] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [ready, setReady] = useState(false);\n  const [query, setQuery] = useState(props.query);\n  const [currentPage, setCurrentPage] = useState(1);\n  useEffect(() => {\n    handleSearchWithPage(1) //ComponentDidMount\n    return () => { console.log('unmount') } //componentWillUnmount\n  },\n    // eslint-disable-next-line\n    []// value in array will trigger componentDidUpdate\n  )\n\n  const handleInputChange = e => {\n    setQuery(e.target.value)\n  }\n  const numberList = () => {\n    let number = [];\n    if (total / 10 < 7) {\n      let round = Math.ceil(total / 10)\n      for (let i = 1; i <= round; i++) {\n        number.push(i)\n      }\n    }\n    else if (currentPage > 4) {\n      number = [\n        currentPage - 3,\n        currentPage - 2,\n        currentPage - 1,\n        currentPage,\n        currentPage + 1,\n        currentPage + 2,\n        currentPage + 3\n      ]\n    }\n    else {\n      number = [1, 2, 3, 4, 5, 6, 7]\n    }\n    return number\n  }\n  let trimByWord = (sentence) => {\n    let wordLength = 100\n    var result = sentence;\n    var resultArray = result.split(\" \");\n    if (resultArray.length > wordLength) {\n      resultArray = resultArray.slice(0, wordLength);\n      result = resultArray.join(\" \") + \"...\";\n    }\n    return result;\n  }\n  const handleSearchWithPage = n => {\n    let body = {\n      \"from\": 10 * (n - 1), \"size\": 10,\n      \"query\": {\n        \"multi_match\": {\n          \"query\": query,\n          \"fields\": [\"content\", \"title\"],\n          \"operator\": \"and\"\n        }\n      },\n      \"aggs\": {\n        \"group_by_state\": {\n          \"terms\": {\n            \"field\": \"host\"\n          }\n        }\n      }\n    }\n    setReady(false)\n    axios.post('http://node2.spai.ml:9200/nutch/_search', body).then(response => {\n      setHITS(response.data.hits.hits)\n      setTotal(response.data.hits.total)\n      setReady(true)\n      setCurrentPage(n)\n    })\n  }\n  return (\n    <>\n      {ready ?\n        <div>\n\n          <header className=\"static\">\n            <div className=\"container\">\n              <div className=\"row\">\n                <div className=\"col-sm\">\n                  <div id=\"logo\">\n                    <img\n                      src=\"img/Travela.png\"\n                      data-retina=\"true\"\n                      alt=\"\"\n                      width=\"auto\"\n                      height=\"40 px\"\n                      onClick={props.onClickBack}\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </header>\n\n          <main>\n            <div id=\"results\">\n              <div className=\"container\">\n                <div className=\"row\">\n                  <div className=\"col-md-12\">\n                    <div className=\"search_bar_list\">\n                      <form>\n                        <input\n                          className=\"form-control\"\n                          placeholder={query}\n                          onChange={handleInputChange}\n                        />\n                        <input\n                          type=\"submit\"\n                          value=\"Search\"\n                          onClick={() => handleSearchWithPage(1)}\n                        />\n                      </form>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"container margin_60_35\" >\n              <div className=\"row\">\n                <div className=\"col-md-12\">\n                  {hits.map(p =>\n                    <div className=\"strip_list wow fadeIn\">\n                      <small>\n                        {p._source.url}\n                      </small>\n                      <a\n                        href={p._source.url}\n                        // eslint-disable-next-line \n                        target=\"_blank\"\n                      >\n                        <h3>\n                          {p._source.title}\n                        </h3>\n                      </a>\n                      <p>\n                        {trimByWord(p._source.content)}\n                      </p>\n                    </div>\n                  )}\n                  <nav aria-label=\"\" className=\"add_top_20\">\n                    <ul className=\"pagination pagination-sm\">\n                      <li className={\n                        currentPage <= 1 ?\n                          \"page-item disabled\"\n                          :\n                          \"page-item\"}\n                      >\n                        <button\n                          className=\"page-link\"\n                          onClick={() => {\n                            handleSearchWithPage(currentPage - 1);\n                          }}\n                        >\n                          Previous\n                          </button>\n                      </li>\n                      {numberList().map(n =>\n                        <li className={\n                          currentPage === n ?\n                            \"page-item active\"\n                            :\n                            \"page-item\"}\n                        >\n                          <button\n                            className=\"page-link\"\n                            onClick={() => {\n                              handleSearchWithPage(n)\n                            }}\n                          >\n                            {n}\n                          </button>\n                        </li>\n                      )}\n                      <li\n                        className={\n                          currentPage > Math.floor(total / 10) ?\n                            \"page-item disabled\"\n                            :\n                            \"page-item\"\n                        }\n                      >\n                        <button\n                          className=\"page-link\"\n                          onClick={() => {\n                            handleSearchWithPage(currentPage + 1)\n                          }}\n                        >\n                          Next\n                          </button>\n                      </li>\n                    </ul>\n                  </nav>\n                </div>\n              </div>\n            </div>\n          </main>\n\n        </div>\n        :\n        <div id=\"preloader\">\n          <div data-loader=\"circle-side\" />\n        </div>\n      }\n    </>\n  )\n\n}\n\n\n\nexport default List;","import React from 'react';\nimport './App.css';\nimport Search from './Search';\nimport List from './List';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      currentPage: <Search onClickSearch={this.changeToList} handleInputChange={this.handleInputChange} />,\n      query: \"\"\n    }\n  }\n\n  changeToList = () => {\n    if (this.state.query.length > 0)\n      this.setState({ currentPage: <List query={this.state.query} onClickBack={this.changeToSearch} sendInputToParent={this.handleInputChange} /> })\n    else\n      alert(\"Please input search query\")\n  }\n\n  changeToSearch = () => {\n    this.setState({\n      query: \"\",\n      currentPage: <Search onClickSearch={this.changeToList} handleInputChange={this.handleInputChange} />\n    })\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      query: e.target.value\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        {this.state.currentPage}\n      </div >\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}